(()=>{"use strict";class e{constructor(e,t,n,o,l,r,c){this._id=e,this.grade=t,this.color=n,this.section=o,this.type=l,this.canLead=r,this.canTopRope=c}}window.onload=function(){l(),document.querySelector("#submitButton").onclick=o};const t=new class{constructor(){}async addRoute(e){let t=JSON.stringify(e);return fetch("/addRoute",{method:"POST",headers:{"Content-Type":"application/json"},body:t}).then((e=>e.json()))}async removeRoute(e){let t=JSON.stringify({_id:e._id});return fetch("/removeRoute",{method:"POST",headers:{"Content-Type":"application/json"},body:t}).then((e=>e.json()))}async getAllRoutes(){let t=[];return fetch("/routes",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((n=>n.forEach((n=>{let o=new e(n._id,n.grade,n.color,n.section,n.type,n.canLead,n.canTopRope);t.push(o)})))).then((()=>t))}},n=new class{constructor(){}parseClimbType(e){if(e.type.includes("rope")){if(e.canLead){if(e.canTopRope)return"Lead/Top Rope";if(!e.canTopRope)return"Lead Only"}else if(e.canTopRope&&!e.canLead)return"Top Rope Only"}else if(e.type.includes("boulder"))return"Boulder"}},o=function(n){n.preventDefault(),console.log("calling addclimb");const o=document.querySelector("#grade"),r=document.querySelector("#color"),c=document.querySelector("#section"),i=document.querySelector("#type"),a=o.value,d=r[r.selectedIndex].value,s=c[c.selectedIndex].value,u=new e(null,a,d,s,function(e){return console.log(),"boulder"===e[e.selectedIndex].value?"boulder":"lead"===e[e.selectedIndex].value||"leadtoprope"===e[e.selectedIndex].value||"toprope"===e[e.selectedIndex].value?"rope":void 0}(i),function(e){return"lead"===e.value||"leadtoprope"===e.value}(i),function(e){return"toprope"===e.value||"leadtoprope"===e.value}(i));t.addRoute(u).then((()=>l()))},l=function(){t.getAllRoutes().then((e=>r(e)))},r=function(e){console.log("Initializing table with "+JSON.stringify(e));const o=document.getElementById("dataTable");for(let e=o.rows.length-1;e>0;e--)o.deleteRow(e);e.forEach((function(e){const r=o.insertRow(-1),c=r.insertCell(0),i=r.insertCell(1),a=r.insertCell(2),d=r.insertCell(3),s=r.insertCell(4),u=r.insertCell(5),p=document.createElement("input");p.type="button",p.id="deleteButton",p.value="Delete",p.onclick=function(){var n;n=e,console.log("handleDeleteClick called"),t.removeRoute(n).then((()=>l()))},u.appendChild(p),c.innerHTML=e._id,i.innerHTML=e.grade,a.innerHTML=e.color,a.style.background=e.color,"Black"===e.color&&(a.style.color="White"),d.innerHTML=e.section,s.innerHTML=n.parseClimbType(e),console.log(e)}))}})();
//# sourceMappingURL=bundle.65629f3107f12022.js.map