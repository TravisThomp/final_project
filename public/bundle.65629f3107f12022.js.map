{"version":3,"file":"bundle.65629f3107f12022.js","mappings":"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","sources":["webpack:///./src/main/app/route/Climb.js","webpack:///./src/admin/admin.js","webpack:///./src/util/MongoManager.js","webpack:///./src/util/ClimbTypeParser.js"],"sourcesContent":["export default class Climb {\r\n    constructor(_id, grade, color, section, type, canLead, canTopRope) {\r\n        this._id = _id;\r\n        this.grade = grade;\r\n        this.color = color;\r\n        this.section = section;\r\n        this.type = type;\r\n        this.canLead = canLead;\r\n        this.canTopRope = canTopRope;\r\n    }\r\n}","import MongoManager from \"../util/MongoManager\";\r\nimport ClimbTypeUtils from \"../util/ClimbTypeParser\";\r\nimport Climb from \"../main/app/route/Climb\";\r\n\r\nwindow.onload = function() {\r\n    getTableData()\r\n    const addButton = document.querySelector('#submitButton')\r\n    addButton.onclick = addClimb\r\n\r\n}\r\n\r\nconst mongoManager = new MongoManager();\r\nconst climbTypeUtils = new ClimbTypeUtils();\r\n\r\n\r\nfunction isLead(type) {\r\n    return type.value === \"lead\" || type.value === \"leadtoprope\";\r\n}\r\n\r\nfunction isTopRope(type) {\r\n    return type.value === \"toprope\" || type.value === \"leadtoprope\";\r\n}\r\n\r\nconst addClimb = function(e) {\r\n    e.preventDefault()\r\n    console.log(\"calling addclimb\")\r\n    const grade = document.querySelector( '#grade' ),\r\n        color = document.querySelector( '#color' ),\r\n        section = document.querySelector( '#section' ),\r\n        type = document.querySelector( '#type' )\r\n\r\n    const gradeValue = grade.value,\r\n        colorValue = color[color.selectedIndex].value,\r\n        sectionValue = section[section.selectedIndex].value\r\n\r\n    const newClimb = new Climb(null, gradeValue, colorValue, sectionValue, getType(type), isLead(type), isTopRope(type))\r\n\r\n\r\n    mongoManager.addRoute(newClimb)\r\n        .then(() => getTableData())\r\n\r\n}\r\n\r\nconst getTableData = function() {\r\n    mongoManager.getAllRoutes()\r\n        .then(response => initTable(response))\r\n}\r\n\r\nconst initTable = function (json) {\r\n    console.log(\"Initializing table with \" + JSON.stringify(json))\r\n\r\n    // Find a <table> element with id=\"myTable\":\r\n    const table = document.getElementById(\"dataTable\");\r\n\r\n    const rowCount = table.rows.length;\r\n    for (let i = rowCount - 1; i > 0; i--) {\r\n        table.deleteRow(i);\r\n    }\r\n\r\n    json.forEach(function(x) {\r\n        // Create an empty <tr> element and add it to the 1st position of the table:\r\n        const row = table.insertRow(-1);\r\n\r\n// Insert new cells (<td> elements) at the 1st and 2nd position of the \"new\" <tr> element:\r\n        const newIdCell = row.insertCell(0);\r\n        const newGradeCell = row.insertCell(1);\r\n        const newColorCell = row.insertCell(2);\r\n        const newSectionCell = row.insertCell(3);\r\n        const newTypeCell = row.insertCell(4);\r\n        const newDeleteCell = row.insertCell(5);\r\n\r\n        const deleteButton = document.createElement('input');\r\n        deleteButton.type = \"button\";\r\n        deleteButton.id = \"deleteButton\";\r\n        deleteButton.value = \"Delete\";\r\n        deleteButton.onclick = function() {handleDeleteClick(x)};\r\n        newDeleteCell.appendChild(deleteButton);\r\n\r\n\r\n// Add some text to the new cells:\r\n        newIdCell.innerHTML = x._id;\r\n        newGradeCell.innerHTML = x.grade;\r\n        newColorCell.innerHTML = x.color;\r\n        newColorCell.style.background = x.color;\r\n        if (x.color === \"Black\") {\r\n            newColorCell.style.color = \"White\";\r\n        }\r\n        newSectionCell.innerHTML = x.section;\r\n        newTypeCell.innerHTML = climbTypeUtils.parseClimbType(x);\r\n        console.log(x)\r\n    })\r\n\r\n}\r\n\r\nfunction handleDeleteClick(climb) {\r\n    console.log(\"handleDeleteClick called\")\r\n    mongoManager.removeRoute(climb)\r\n        .then(() => getTableData())\r\n}\r\n\r\nfunction getType(type) {\r\n    console.log()\r\n    if (type[type.selectedIndex].value === \"boulder\") {\r\n        return \"boulder\";\r\n    } else if (type[type.selectedIndex].value === \"lead\" || type[type.selectedIndex].value === \"leadtoprope\" || type[type.selectedIndex].value === \"toprope\") {\r\n        return \"rope\"\r\n    }\r\n}\r\n","import Climb from \"../main/app/route/Climb\";\r\n\r\nexport default class MongoManager\r\n{\r\n    constructor()\r\n    {\r\n        \r\n    }\r\n\r\n    /**\r\n     * Adds a route to the database\r\n     * @param {route to add} route \r\n     */\r\n    async addRoute(route)\r\n    {\r\n       let body = JSON.stringify(route);\r\n        \r\n        return fetch( '/addRoute', {\r\n            method:'POST',\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },  \r\n            body: body \r\n          })\r\n          .then( response => response.json())\r\n\r\n          //TO-DO: Update route ID\r\n    }\r\n\r\n    /**\r\n     * removes a route from the database\r\n     * @param {route to remove} route \r\n     */\r\n    async removeRoute(route)\r\n    {\r\n        let body = JSON.stringify({\"_id\": route._id});\r\n\r\n        return fetch( '/removeRoute', {\r\n            method:'POST',\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },  \r\n            body: body \r\n          })\r\n          .then( response => response.json())\r\n\r\n          //TO-DO: Update route list\r\n    }\r\n\r\n    /**\r\n     * Gets all the routes in database\r\n     * @return An array of all the routes\r\n     */\r\n    async getAllRoutes()\r\n    {\r\n        let routes = []\r\n        return fetch( `/routes`, {\r\n            method:'GET',\r\n            headers: {\r\n              \"Content-Type\": \"application/json\"\r\n          }})\r\n          .then( response => response.json())\r\n          .then(routeArray => routeArray.forEach(rawRoute => {\r\n            let climb = new Climb(rawRoute._id, rawRoute.grade, rawRoute.color, rawRoute.section, rawRoute.type, rawRoute.canLead, rawRoute.canTopRope)\r\n            routes.push(climb)\r\n          })).then(() => {return routes})\r\n    }\r\n\r\n}","export default class ClimbTypeUtils {\r\n\r\n    constructor() {}\r\n    parseClimbType(climb) {\r\n        if (climb.type.includes(\"rope\")) {\r\n            if (climb.canLead) {\r\n                if (climb.canTopRope) {\r\n                    return \"Lead/Top Rope\"\r\n                } else if (!climb.canTopRope) {\r\n                    return \"Lead Only\"\r\n                }\r\n            } else if (climb.canTopRope && !climb.canLead) {\r\n                return \"Top Rope Only\"\r\n            }\r\n        } else if (climb.type.includes(\"boulder\")) {\r\n            return \"Boulder\"\r\n        }\r\n    }\r\n}"],"names":["Climb","constructor","_id","grade","color","section","type","canLead","canTopRope","this","window","onload","getTableData","document","querySelector","onclick","addClimb","mongoManager","route","body","JSON","stringify","fetch","method","headers","then","response","json","routes","routeArray","forEach","rawRoute","climb","push","climbTypeUtils","parseClimbType","includes","e","preventDefault","console","log","gradeValue","value","colorValue","selectedIndex","sectionValue","newClimb","getType","isLead","isTopRope","addRoute","getAllRoutes","initTable","table","getElementById","i","rows","length","deleteRow","x","row","insertRow","newIdCell","insertCell","newGradeCell","newColorCell","newSectionCell","newTypeCell","newDeleteCell","deleteButton","createElement","id","removeRoute","appendChild","innerHTML","style","background"],"sourceRoot":""}